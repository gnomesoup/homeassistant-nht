# Node 35
input_boolean:
  minimote_master_bedroom_1:
    name: Minimote Master Bedroom Button 1 Pushed
    icon: mdi:radio_button_checked
  minimote_master_bedroom_2:
    name: Minimote Master Bedroom Button 1 Held
    icon: mdi:radio_button_checked
  minimote_master_bedroom_3:
    name: Minimote Master Bedroom Button 2 Pushed
    icon: mdi:radio_button_checked
  minimote_master_bedroom_4:
    name: Minimote Master Bedroom Button 2 Held
    icon: mdi:radio_button_checked
  minimote_master_bedroom_5:
    name: Minimote Master Bedroom Button 3 Pushed
    icon: mdi:radio_button_checked
  minimote_master_bedroom_6:
    name: Minimote Master Bedroom Button 3 Held
    icon: mdi:radio_button_checked
  minimote_master_bedroom_7:
    name: Minimote Master Bedroom Button 4 Pushed
    icon: mdi:radio_button_checked
  minimote_master_bedroom_8:
    name: Minimote Master Bedroom Button 4 Held
    icon: mdi:radio_button_checked

automation:
  - alias: Minimote Master Bedroom
    id: "8264c12f-69dc-412d-9ce8-f745a13f6ad6"
    trigger:
      - platform: event
        event_type: zwave_js_value_notification
        event_data:
          node_id: 14
          home_id: 3996165589
    action:
      - alias: "Action on button pressed"
        choose:
        - conditions:
          - "{{trigger.event.data.value|int == 1}}"
          sequence:
          - service: homeassistant.toggle
            alias: Toggle accordion lamp on/off
            target:
              entity_id:
                - light.ikea_of_sweden_tradfri_bulb_e26_ws_opal_1000lm_166ca8fe_level_light_color_on_off

        - conditions:
          - "{{trigger.event.data.value|int == 2}}"
          sequence:
            - choose:
              - conditions:
                - alias: "Accordion light brighter that 50%"
                  condition: numeric_state
                  entity_id: light.ikea_of_sweden_tradfri_bulb_e26_ws_opal_1000lm_166ca8fe_level_light_color_on_off
                  attribute: brightness
                  above: 192
                sequence:
                  - service: light.turn_on
                    target:
                      entity_id: light.ikea_of_sweden_tradfri_bulb_e26_ws_opal_1000lm_166ca8fe_level_light_color_on_off
                    data:
                      brightness: 255
              default:
                - service: light.turn_on
                  target:
                    entity_id: light.ikea_of_sweden_tradfri_bulb_e26_ws_opal_1000lm_166ca8fe_level_light_color_on_off
                  data:
                    brightness: 64

        - conditions:
          - "{{trigger.event.data.value|int == 3}}"
          sequence:
          - service: homeassistant.toggle
            target:
              entity_id:
                - switch.smart_plug_with_2_usb_ports

      # - service: homeassistant.toggle
      #   data_template:
      #     entity_id: >
      #       {% set map = {1: "input_boolean.minimote_master_bedroom_1",
      #                     2: "input_boolean.minimote_master_bedroom_2",
      #                     3: "input_boolean.minimote_master_bedroom_3",
      #                     4: "input_boolean.minimote_master_bedroom_4",
      #                     5: "input_boolean.minimote_master_bedroom_5",
      #                     6: "input_boolean.minimote_master_bedroom_6",
      #                     7: "input_boolean.minimote_master_bedroom_7",
      #                     8: "input_boolean.minimote_master_bedroom_8"} %}
      #       {{ map[trigger.event.data.value|int] }}
